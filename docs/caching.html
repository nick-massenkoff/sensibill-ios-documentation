<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Caching  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="Caching  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html"> Docs</a> (100% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html"> Reference</a>
        <img id="carat" src="img/carat.png" />
        Caching  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="authentication.html">Authentication</a>
              </li>
              <li class="nav-group-task">
                <a href="caching.html">Caching</a>
              </li>
              <li class="nav-group-task">
                <a href="configuration.html">Configuration</a>
              </li>
              <li class="nav-group-task">
                <a href="examples.html">Examples</a>
              </li>
              <li class="nav-group-task">
                <a href="transactions.html">Transactions</a>
              </li>
              <li class="nav-group-task">
                <a href="ui.html">UI</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/Authenticator.html">Authenticator</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:@M@SensibillUI@objc(cs)SBLCaptureOnboardingViewController">CaptureOnboardingViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:@M@SensibillUI@objc(cs)SBLCaptureTipsViewController">CaptureTipsViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Credentials.html">Credentials</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Discount.html">Discount</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Fee.html">Fee</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ItemProperty.html">ItemProperty</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Original.html">Original</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PasswordAuthenticator.html">PasswordAuthenticator</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PasswordEvaluation.html">PasswordEvaluation</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ReceiptCollection.html">ReceiptCollection</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ReceiptListViewController.html">ReceiptListViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ReceiptSearchFilter.html">ReceiptSearchFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/RecentExportsViewController.html">RecentExportsViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Request.html">Request</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Reward.html">Reward</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Sensibill.html">Sensibill</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/User.html">User</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/DiscountType.html">DiscountType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/FeeType.html">FeeType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/MatchingError.html">MatchingError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/PasswordStrength.html">PasswordStrength</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RequestAuthenticationType.html">RequestAuthenticationType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SensibillError.html">SensibillError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/SBLReceiptListViewControllerDataSource.html">SBLReceiptListViewControllerDataSource</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/TokenProvider.html">TokenProvider</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='caching' class='heading'>Caching</h1>

<p>Here is a summarized description of what the iOS Sensibill SDK stores on  user’s devices.</p>
<h2 id='user-identifier' class='heading'>User Identifier</h2>

<p>The SDK requires a unique user identifier when authentication starts. This identifier is the key to access most of the data stored on disk. </p>

<p>The user identifier is stored:</p>

<ul>
<li>in the iOS keychain</li>
<li>in our CoreData database</li>
<li>in a folder name in the app sandbox</li>
</ul>
<h2 id='authentication-tokens' class='heading'>Authentication Tokens</h2>

<p>Authentication Tokens provided for users using the TokenProvider protocol are saved in the <strong>iOS Keychain</strong>. Saving this information is necessary to be able to operate offline, and to speed up the startup process.</p>

<p>Users password are never stored.</p>
<h2 id='sandbox-cache-folder' class='heading'>Sandbox Cache folder</h2>

<p>When receipt details information is fetched, it is serialized and stored on disk, in a folder named with the user identifier.
This allows offline access to receipt details.</p>

<p>Each client has a set of configuration options, available through an API endpoint. The response of this endpoint is serialized and store in the application cache folder.</p>

<p>Images of receipts are also stored in the cache folder for offline access (and to save bandwidth by not fetching the same image twice).</p>

<p>On iOS, the cache folder is emptied automatically when the OS requires data (to install OS updates, new apps, store photos, etc…)</p>
<h2 id='sandbox-document-folder' class='heading'>Sandbox Document folder</h2>

<p>When uploading receipts, the image (and metadata) are serialized and saved to disk.
This information is deleted once the transfer is completed and successful.
If an error occurs, the serialized data is kept on disk until the error is resolved or the process cancelled by the user.</p>
<h2 id='synchronized-database' class='heading'>Synchronized Database</h2>

<p>A local database (using SQLite/CoreData) is synchronized when users log in. This database contains summaries of all user’s receipts and metadata (folders, tags, etc…)</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2019 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2019-10-25)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.6</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
